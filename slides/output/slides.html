<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc">
  <meta name="author" content="Ben Lambert">
  <meta name="author" content="Thibault Lestang">
  <title>Practical approaches to writing better software</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="../reveal.js/dist/reset.css">
  <link rel="stylesheet" href="../reveal.js/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ff0000; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #40a070; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4070a0; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #60a0b0; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #902000; } /* DataType */
    code span.dv { color: #40a070; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #40a070; } /* Float */
    code span.fu { color: #06287e; } /* Function */
    code span.im { } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #007020; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #007020; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #bb6688; } /* SpecialString */
    code span.st { color: #4070a0; } /* String */
    code span.va { color: #19177c; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
  </style>
  <link rel="stylesheet" href="../reveal.js/dist/theme/oxrse.css" id="theme">
</head>
<body>
  <div class="reveal">
    <div class="slides">

<section id="title-slide">
  <h1 class="title">Practical approaches to writing better software</h1>
  <p class="author">
            Ben Lambert<sup>1</sup>,
            Thibault Lestang<sup>1</sup>
  </p>
  <p style="font-size: .8em"><sup>1</sup>Department of Computer Science, University of Oxford</p>
<img src="img/banner_ox_rse.svg" alt="OxRSE logo" width="40%">
</section>

<section>
<section id="quality-research-software" class="title-slide slide level1">
<h1>Quality research software</h1>

</section>
<section id="first-aim-sustainable-software" class="slide level2">
<h2>First aim: sustainable software</h2>
<p>Long after the project is “done”, it is possible to</p>
<ul>
<li>Compile/install/run the software (<strong>Usability</strong>).</li>
<li>Read and understand the code (<strong>Readability</strong>).</li>
<li>Update the program (<strong>Maintainability</strong>).</li>
<li>Reuse the code/program (<strong>Reusability</strong>).</li>
</ul>
<p>This applies to other researchers… and <em>yourself</em> in 6 months!</p>
<aside class="notes">
<p>Software can be “good” in many ways, but in a research context, sustainability is the most important measure of software quality.</p>
<p>sustainable software is…</p>
<p>The reason sustainability is so important is because it is vital to reproducibility and transparancy. If peers can’t run your software in years after youyr paper is published, they will ahve a hard time reproduce your work. If your code is very difficult to understand, it’s going to be very difficult for anyone to get insights into the actual implementation of your work. That can be very problematic, especially for results with societal impact.</p>
<ul>
<li>It can contain Markdown</li>
<li>like this list</li>
</ul>
</aside>
</section>
<section id="software-is-a-research-output" class="slide level2">
<h2>Software is a research output</h2>
<p>It should be possible to build upon existing research software (<strong>Extensibility</strong>).</p>
<p>Typical hindrance to reusability and extensibility are hard-coded parameters and file paths and low modularity.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>file_handle <span class="op">=</span> <span class="bu">open</span>(<span class="st">&quot;/Users/Sam/phdthesis/data/survey.dat&quot;</span>)</span></code></pre></div>
<aside class="notes">
<p>Software sustainability matters because, very much like a paper, software is a research output.</p>
<p>There are few things in science that can enable future research as much as well-written research software. Whether it’s the future of <em>your</em> research or somebody else’s.</p>
<p>Software is “soft”, it’s easy to share, it’s easy to build upon - compared to a physical experimental setup for instance.</p>
<p>If we consider research as a collective human effort, software plays a key role in enabling this collaboration.</p>
</aside>
</section></section>
<section>
<section id="quality-software-accelerates-your-research" class="title-slide slide level1">
<h1>Quality software accelerates your research</h1>

</section>
<section id="software-thats-easier-to-work-with" class="slide level2">
<h2>Software that’s easier to work with</h2>
<ul>
<li>Bugs are easier to catch and easier to fix.</li>
<li>Source code is easy to navigate.</li>
<li>Source code is easy to modify.</li>
</ul>
</section>
<section id="software-that-can-be-built-upon" class="slide level2">
<h2>Software that can be built upon</h2>
<ul>
<li>Code can be understood months or years after development.</li>
<li>Software can be reused across projects, instead of starting from scratch.</li>
<li>Software can be extended to new situations.</li>
</ul>
</section>
<section id="software-that-makes-your-research-more-impactful" class="slide level2">
<h2>Software that makes your research more impactful</h2>
<p>Open source, quality research software increases credibility and visibility of research.</p>
</section>
<section id="hurdles-in-the-way-of-improving-software-quality" class="slide level2">
<h2>Hurdles in the way of improving software quality</h2>
<ul>
<li>Lack of exposure to good examples.</li>
<li>Misconception of what “good code” looks like. “This code runs really really fast: it must be great! (Although I can’t understand it.)”</li>
<li>Too few resources relevant to researchers.</li>
<li>Lack of training.</li>
<li>Assumption that the code will never be read.</li>
</ul>
<aside class="notes">
<p>If research software quality has such a positive impact, which isn’t everyone writing amazing software</p>
<p>“my code will not be read”: if you assume this, it’s likely that it will not be. But if you write readable software, you code is more likely to be read (new students/post-docs, collaborators). Also, <strong>you will read your code many times</strong>!</p>
</aside>
</section></section>
<section>
<section id="its-not-as-difficult-as-you-might-think" class="title-slide slide level1">
<h1>It’s not as difficult as you might think!</h1>

</section>
<section id="simple-approach-you-can-apply-today" class="slide level2">
<h2>Simple approach you can apply today</h2>
<ul>
<li>Choose descriptive names.</li>
<li>Avoid nested logic (<code>for</code>/<code>if</code>/<code>else</code>).</li>
<li>Reduce the size of functions’ parameter lists.</li>
<li>Break long functions into smaller functions.</li>
<li>Follow a style guide.</li>
</ul>
<p>By keeping these in mind as you code, you can make your software a lot better already.</p>
</section>
<section id="code-smells" class="slide level2">
<h2>Code Smells</h2>
<p>There are many ways to write good software.</p>
<p>There are fewer ways to write bad software.</p>
<p><em>Code smells</em> are recognised patterns of code likely to hinder understanding and make it hard to work with.</p>
<p>Code smells are actually named (Fowler, 2000).</p>
</section>
<section id="which-one-of-these-is-not-a-real-code-smell" class="slide level2">
<h2>Which one of these is not a real code smell?</h2>
<ul>
<li>Long Parameter List</li>
<li>Duplicated Code</li>
<li>Global Data</li>
<li>Large Class</li>
<li>Feature Envy</li>
<li>Inappropriate Intimacy</li>
<li>Angry Lovers</li>
<li>Freeloader</li>
<li>Refused Bequest</li>
</ul>
</section>
<section id="why-learn-how-to-smell" class="slide level2">
<h2>Why learn how to smell?</h2>
<p>Code smells have well-defined remedies.</p>
<p>Learning to classify code as whiffing of a particular odour means you can apply these.</p>
</section></section>
<section id="example-1-a-long-parameter-list" class="title-slide slide level1">
<h1>Example 1: A long parameter list</h1>

</section>

<section>
<section id="in-code-documentation-and-style-guides" class="title-slide slide level1">
<h1>In-code documentation and style guides</h1>

</section>
<section id="documentation-helps-today-and-tomorrow" class="slide level2">
<h2>Documentation helps today and tomorrow</h2>
<p><code>roxygen2</code> syntax (<code>devtools</code> package)</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; Add together two numbers</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39;</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; @param x A number.</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; @param y A number.</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; @return The sum of \code{x} and \code{y}.</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; @examples</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; add(1, 1)</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; add(10, 1)</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>add <span class="ot">&lt;-</span> <span class="cf">function</span>(x, y) {</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>  x <span class="sc">+</span> y</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Tip: Write the documentation before writing the code!</p>
</section>
<section id="style-guides-standardise-how-code-looks" class="slide level2">
<h2>Style guides standardise how code looks</h2>
<p>A <em>style guide</em> is a set of rules describing how code should be formatted.</p>
<table>
<thead>
<tr class="header">
<th style="text-align: center;">Lang</th>
<th style="text-align: center;">Guide example</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">R</td>
<td style="text-align: center;">tidyverse</td>
</tr>
<tr class="even">
<td style="text-align: center;">Python</td>
<td style="text-align: center;">PEP8</td>
</tr>
<tr class="odd">
<td style="text-align: center;">C++</td>
<td style="text-align: center;">LLVM style guide</td>
</tr>
<tr class="even">
<td style="text-align: center;">…</td>
<td style="text-align: center;">…</td>
</tr>
</tbody>
</table>
<p>Tools (<code>styler</code>, <code>black</code>, <code>clang-format</code>) can reformat code automagically.</p>
</section></section>
<section>
<section id="how-to-improve-your-smell" class="title-slide slide level1">
<h1>How to improve your smell?</h1>

</section>
<section id="empathy-and-writing" class="slide level2">
<h2>Empathy and writing</h2>
<ul>
<li>Steven Pinker argues that empathy is key to good academic writing.</li>
<li>Even if writing solo, you can reduce the empathy gap with readers.</li>
<li>You can ask a future you if they understand what you mean.</li>
<li>(Better) you can ask others if they understand.</li>
</ul>
</section>
<section id="empathy-and-coding" class="slide level2">
<h2>Empathy and coding</h2>
<ul>
<li>Writing good software also requires empathy.</li>
<li>You can also use the same approaches to lower the empathy gap.</li>
<li>Repeatedly ask future you what they think about code and refactor.</li>
<li>(Much much better) you can ask others if they understand.</li>
</ul>
</section>
<section id="coding-collaboratively" class="slide level2">
<h2>Coding collaboratively</h2>
<ul>
<li>There are a number of approaches to working collaboratively.</li>
<li>Coding in pairs.</li>
<li>One off code reviews between you and your colleagues.</li>
<li>(Best) code collaboratively:
<ul>
<li>Produces better quality software.</li>
<li>You also learn other approaches.</li>
<li>Github is a great ground for collaborative development.</li>
</ul></li>
</ul>
</section>
<section id="further-exposure" class="slide level2">
<h2>Further exposure</h2>
<ul>
<li><em>Code Smells and Feels</em>, Jenny Byran, useR 2018.</li>
<li>Martin Fowler, Kent Beck <em>Refactoring, 2nd edition</em> (Esp chapter 3).</li>
<li>“Better Codehub” badges on Github: semi-automated checking of software.</li>
<li>Research software engineering groups.</li>
</ul>
</section>
<section id="oxford-research-sofware-engineering" class="slide level2">
<h2>Oxford Research Sofware Engineering</h2>
<p><img data-src="./img/banner_ox_rse.svg" style="width:40.0%" /></p>
<p>Team of research software engineers in the Department of Computer Science.</p>
<p>We work with teams across the University of Oxford</p>
<ul>
<li>Software engineering and development.</li>
<li>Supporting adoption of good practices.</li>
<li>Software reviews.</li>
<li>Training courses.</li>
</ul>
<aside class="notes">
<ul>
<li>Who are we?</li>
<li>What do we offer?
<ul>
<li>Example projects</li>
<li>Example courses</li>
</ul></li>
<li>How to get in touch?</li>
</ul>
</aside>
</section>
<section id="oxford-research-sofware-engineering-1" class="slide level2">
<h2>Oxford Research Sofware Engineering</h2>
<p><img data-src="./img/banner_ox_rse.svg" style="width:40.0%" /></p>
<p>Visit us at <a href="https://www.rse.ox.ac.uk/">rse.ox.ac.uk</a>!</p>
<aside class="notes">
<ul>
<li>Who are we?</li>
<li>What do we offer?
<ul>
<li>Example projects</li>
<li>Example courses</li>
</ul></li>
<li>How to get in touch?</li>
</ul>
</aside>
</section></section>
<section id="thank-you" class="title-slide slide level1">
<h1>Thank you!</h1>

</section>
    </div>
  </div>

  <script src="../reveal.js/dist/reveal.js"></script>

  // reveal.js plugins
  <script src="../reveal.js/plugin/notes/notes.js"></script>
  <script src="../reveal.js/plugin/search/search.js"></script>
  <script src="../reveal.js/plugin/zoom/zoom.js"></script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
        // Push each slide change to the browser history
        history: true,

        // reveal.js plugins
        plugins: [
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    </body>
</html>
